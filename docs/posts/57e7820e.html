<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>rand 随机数生成方法研究草稿 - 有趣的技术实践分享</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="有趣的技术实践分享"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="有趣的技术实践分享"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="本博客暂不显示摘要，请大家谅解"><meta property="og:type" content="blog"><meta property="og:title" content="rand 随机数生成方法研究草稿"><meta property="og:url" content="https://jiejaitt.github.io/posts/57e7820e.html"><meta property="og:site_name" content="有趣的技术实践分享"><meta property="og:description" content="本博客暂不显示摘要，请大家谅解"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://jiejaitt.github.io/img/og_image.png"><meta property="article:published_time" content="2022-12-06T13:06:34.063Z"><meta property="article:modified_time" content="2022-12-06T13:34:26.122Z"><meta property="article:author" content="JIeJaitt"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://jiejaitt.github.io/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://jiejaitt.github.io/posts/57e7820e.html"},"headline":"rand 随机数生成方法研究草稿","image":["https://jiejaitt.github.io/img/og_image.png"],"datePublished":"2022-12-06T13:06:34.063Z","dateModified":"2022-12-06T13:34:26.122Z","author":{"@type":"Person","name":"JIeJaitt"},"publisher":{"@type":"Organization","name":"有趣的技术实践分享","logo":{"@type":"ImageObject","url":"https://jiejaitt.github.io/img/logo.svg"}},"description":"本博客暂不显示摘要，请大家谅解"}</script><link rel="canonical" href="https://jiejaitt.github.io/posts/57e7820e.html"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="有趣的技术实践分享" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/JIeJaitt"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-12-06T13:06:34.063Z" title="2022/12/6 21:06:34">2022-12-06</time>发表</span><span class="level-item"><time dateTime="2022-12-06T13:34:26.122Z" title="2022/12/6 21:34:26">2022-12-06</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/">项目实战</a></span><span class="level-item">11 分钟读完 (大约1710个字)</span></div></div><h1 class="title is-3 is-size-4-mobile">rand 随机数生成方法研究草稿</h1><div class="content"><p>package rand 实现了用于加解密的更安全的随机数生成器。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;crypto/rand&quot;</span></span><br></pre></td></tr></table></figure>



<h2 id="Variables"><a href="#Variables" class="headerlink" title="Variables"></a>Variables</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Reader io.Reader</span><br></pre></td></tr></table></figure>
<p>Reader是一个全局、共享的密码用强随机数生成器。在Unix类型系统中，会从<code>/dev/urandom</code>读取；而Windows中会调用<code>CryptGenRandom API</code>。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main </span><br><span class="line"><span class="keyword">import</span>(</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;encoding/base64&quot;</span></span><br><span class="line">    <span class="string">&quot;crypto/rand&quot;</span></span><br><span class="line">    <span class="string">&quot;io&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">//sessionId函数用来生成一个session ID，即session的唯一标识符</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sessionId</span><span class="params">()</span></span> <span class="type">string</span> &#123;</span><br><span class="line">    b := <span class="built_in">make</span>([]<span class="type">byte</span>, <span class="number">32</span>)</span><br><span class="line">    <span class="comment">//ReadFull从rand.Reader精确地读取len(b)字节数据填充进b</span></span><br><span class="line">    <span class="comment">//rand.Reader是一个全局、共享的密码用强随机数生成器</span></span><br><span class="line">    <span class="keyword">if</span> _, err := io.ReadFull(rand.Reader, b); err != <span class="literal">nil</span> &#123; </span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Println(b) <span class="comment">//[62 186 123 16 209 19 130 218 146 136 171 211 12 233 45 99 80 200 59 20 56 254 170 110 59 147 223 177 48 136 220 142]</span></span><br><span class="line">    <span class="keyword">return</span> base64.URLEncoding.EncodeToString(b)<span class="comment">//将生成的随机数b编码后返回字符串,该值则作为session ID</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123; </span><br><span class="line">    fmt.Println(sessionId()) <span class="comment">//Prp7ENETgtqSiKvTDOktY1DIOxQ4_qpuO5PfsTCI3I4=</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="func-Int"><a href="#func-Int" class="headerlink" title="func Int"></a>func Int</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Int</span><span class="params">(rand io.Reader, max *big.Int)</span></span> (n *big.Int, err <span class="type">error</span>)</span><br></pre></td></tr></table></figure>
<p>返回一个在[0, max)区间服从均匀分布的随机值，如果max&lt;&#x3D;0则会panic。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main </span><br><span class="line"><span class="keyword">import</span>(</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;crypto/rand&quot;</span></span><br><span class="line">    <span class="string">&quot;math/big&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123; </span><br><span class="line">    <span class="comment">//从128开始，这样就能够将(max.BitLen() % 8) == 0的情况包含在里面</span></span><br><span class="line">    <span class="keyword">for</span> n := <span class="number">128</span>; n &lt; <span class="number">140</span>; n++ &#123;</span><br><span class="line">        b := <span class="built_in">new</span>(big.Int).SetInt64(<span class="type">int64</span>(n)) <span class="comment">//将new(big.Int)设为int64(n)并返回new(big.Int)</span></span><br><span class="line">        fmt.Printf(<span class="string">&quot;max Int is : %v\n&quot;</span>, b)</span><br><span class="line">        i, err := rand.Int(rand.Reader, b)</span><br><span class="line">        <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">            fmt.Printf(<span class="string">&quot;Can&#x27;t generate random value: %v, %v&quot;</span>, i, err)</span><br><span class="line">        &#125;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;rand Int is : %v\n&quot;</span>, i)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">bogon:~ user$ go run testGo.go </span><br><span class="line">max Int is : 128</span><br><span class="line">rand Int is : 25</span><br><span class="line">max Int is : 129</span><br><span class="line">rand Int is : 117</span><br><span class="line">max Int is : 130</span><br><span class="line">rand Int is : 85</span><br><span class="line">max Int is : 131</span><br><span class="line">rand Int is : 62</span><br><span class="line">max Int is : 132</span><br><span class="line">rand Int is : 27</span><br><span class="line">max Int is : 133</span><br><span class="line">rand Int is : 120</span><br><span class="line">max Int is : 134</span><br><span class="line">rand Int is : 10</span><br><span class="line">max Int is : 135</span><br><span class="line">rand Int is : 27</span><br><span class="line">max Int is : 136</span><br><span class="line">rand Int is : 11</span><br><span class="line">max Int is : 137</span><br><span class="line">rand Int is : 119</span><br><span class="line">max Int is : 138</span><br><span class="line">rand Int is : 35</span><br><span class="line">max Int is : 139</span><br><span class="line">rand Int is : 83</span><br></pre></td></tr></table></figure>

<h2 id="func-Prime"><a href="#func-Prime" class="headerlink" title="func Prime"></a>func Prime</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Prime</span><span class="params">(rand io.Reader, bits <span class="type">int</span>)</span></span> (p *big.Int, err <span class="type">error</span>)</span><br></pre></td></tr></table></figure>
<p>返回一个具有指定字位数的数字，该数字具有很高可能性是质数。如果从rand读取时出错，或者bits&lt;2会返回错误。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main </span><br><span class="line"><span class="keyword">import</span>(</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;crypto/rand&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123; </span><br><span class="line">    <span class="keyword">for</span> n := <span class="number">2</span>; n &lt; <span class="number">10</span>; n++ &#123;</span><br><span class="line">        p, err := rand.Prime(rand.Reader, n) <span class="comment">//n代表位数，比如3为2位，127为7位</span></span><br><span class="line">        <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">            fmt.Printf(<span class="string">&quot;Can&#x27;t generate %d-bit prime: %v&quot;</span>, n, err)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> p.BitLen() != n &#123; <span class="comment">//返回p的绝对值的字位数，0的字位数为0</span></span><br><span class="line">            fmt.Printf(<span class="string">&quot;%v is not %d-bit&quot;</span>, p, n)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> !p.ProbablyPrime(<span class="number">32</span>) &#123; <span class="comment">//对p进行32次Miller-Rabin质数检测。如果方法返回真则p是质数的几率为1-(1/4)**32；否则p不是质数</span></span><br><span class="line">            fmt.Printf(<span class="string">&quot;%v is not prime&quot;</span>, p)</span><br><span class="line">        &#125;</span><br><span class="line">        fmt.Println(p)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">bogon:~ user$ go run testGo.go </span><br><span class="line">3</span><br><span class="line">7</span><br><span class="line">13</span><br><span class="line">31</span><br><span class="line">53</span><br><span class="line">109</span><br><span class="line">223</span><br><span class="line">439</span><br></pre></td></tr></table></figure>

<p>如果位数小于2的话，会报错：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main </span><br><span class="line"><span class="keyword">import</span>(</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;crypto/rand&quot;</span></span><br><span class="line">    <span class="string">&quot;log&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123; </span><br><span class="line">    p, err := rand.Prime(rand.Reader, <span class="number">1</span>) <span class="comment">//n代表位数，比如3为2位，127为7位</span></span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        log.Fatal(err)</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Println(p)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">bogon:~ user$ go run testGo.go </span><br><span class="line">2019/02/23 12:31:37 crypto/rand: prime size must be at least 2-bit</span><br><span class="line">exit status 1</span><br></pre></td></tr></table></figure>

<h2 id="func-Read"><a href="#func-Read" class="headerlink" title="func Read"></a>func Read</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Read</span><span class="params">(b []<span class="type">byte</span>)</span></span> (n <span class="type">int</span>, err <span class="type">error</span>)</span><br></pre></td></tr></table></figure>
<p>本函数是一个使用<code>io.ReadFull</code>调用<code>Reader.Read</code>的辅助性函数。当且仅当<code>err == nil</code>时，返回值<code>n == len(b)</code>。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">c := <span class="number">10</span> </span><br><span class="line">b := <span class="built_in">make</span>([]<span class="type">byte</span>, c) </span><br><span class="line"><span class="comment">// func Read(b []byte) (n int, err error)</span></span><br><span class="line"><span class="comment">// 生成 b 切片大小的随机数</span></span><br><span class="line">_, err := rand.Read(b) </span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;     </span><br><span class="line">	fmt.Println(<span class="string">&quot;error:&quot;</span>, err)     </span><br><span class="line">	<span class="keyword">return</span> </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">// func Equal(a []byte, b []byte) bool</span></span><br><span class="line"><span class="comment">// 	Equal 返回 a 和 b 是否具有相同的长度并包含相同的字节</span></span><br><span class="line"><span class="comment">// 也就断判断两个切片的内容是否完全相同。</span></span><br><span class="line"><span class="comment">//	一个 nil 参数相当于一个空切片（empty slice）。</span></span><br><span class="line">fmt.Println(bytes.Equal([]<span class="type">byte</span>(<span class="string">&quot;Go&quot;</span>), []<span class="type">byte</span>(<span class="string">&quot;Go&quot;</span>)))</span><br><span class="line">fmt.Println(bytes.Equal([]<span class="type">byte</span>(<span class="string">&quot;Go&quot;</span>), []<span class="type">byte</span>(<span class="string">&quot;C++&quot;</span>)))</span><br><span class="line"><span class="comment">// Output:</span></span><br><span class="line"><span class="comment">//  true</span></span><br><span class="line"><span class="comment">//  false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 切片现在应该包含随机字节（random bytes），而不仅仅是零。</span></span><br><span class="line"><span class="comment">// Output:</span></span><br><span class="line"><span class="comment">//	false</span></span><br><span class="line">fmt.Println(bytes.Equal(b, <span class="built_in">make</span>([]<span class="type">byte</span>, c)))</span><br></pre></td></tr></table></figure>
<p>因为本函数是一个使用io.ReadFull调用Reader.Read的辅助性函数，所以最上面的那个生成session ID的例子等价于：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main </span><br><span class="line"><span class="keyword">import</span>(</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;encoding/base64&quot;</span></span><br><span class="line">    <span class="string">&quot;crypto/rand&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">//sessionId函数用来生成一个session ID，即session的唯一标识符</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sessionId</span><span class="params">()</span></span> <span class="type">string</span> &#123;</span><br><span class="line">    b := <span class="built_in">make</span>([]<span class="type">byte</span>, <span class="number">32</span>)</span><br><span class="line">    <span class="comment">//rand.Reader是一个全局、共享的密码用强随机数生成器</span></span><br><span class="line">    n, err := rand.Read(b);</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123; </span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Println(b[:n]) <span class="comment">//[154 94 244 2 147 96 148 6 13 27 3 52 231 127 160 159 40 47 84 116 79 87 160 217 185 216 47 143 101 107 219 178]</span></span><br><span class="line">    <span class="keyword">return</span> base64.URLEncoding.EncodeToString(b)<span class="comment">//将生成的随机数b编码后返回字符串,该值则作为session ID</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123; </span><br><span class="line">    fmt.Println(sessionId()) <span class="comment">//ml70ApNglAYNGwM053-gnygvVHRPV6DZudgvj2Vr27I=</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Read-Function"><a href="#Read-Function" class="headerlink" title="Read Function"></a>Read Function</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Read 是一个辅助函数，它使用 io.ReadFull 调用 Reader.Read。</span></span><br><span class="line"><span class="comment">// 返回时，n == len(b) 当且仅当 err == nil。</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Read</span><span class="params">(b []<span class="type">byte</span>)</span></span> (n <span class="type">int</span>, err <span class="type">error</span>) &#123;</span><br><span class="line">	<span class="keyword">return</span> io.ReadFull(Reader, b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>简单来说，它读出的数据，并不一定是指定长度的。</p>
<h2 id="ReadFull-Function"><a href="#ReadFull-Function" class="headerlink" title="ReadFull Function"></a>ReadFull Function</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ReadFull 将 r 中的 len(buf) 个字节准确地读入 buf。</span></span><br><span class="line"><span class="comment">// 它返回复制的字节数，如果读取的字节数较少，则返回错误。</span></span><br><span class="line"><span class="comment">// 仅当没有读取字节时，错误才是 EOF。</span></span><br><span class="line"><span class="comment">// 如果在读取一些但不是所有字节后发生 EOF，</span></span><br><span class="line"><span class="comment">// ReadFull 返回 ErrUnexpectedEOF。</span></span><br><span class="line"><span class="comment">// 返回时，n == len(buf) 当且仅当 err == nil。</span></span><br><span class="line"><span class="comment">// 如果 r 返回一个读取了至少 len(buf) 个字节的错误，则删除该错误。</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ReadFull</span><span class="params">(r Reader, buf []<span class="type">byte</span>)</span></span> (n <span class="type">int</span>, err <span class="type">error</span>) &#123;</span><br><span class="line">	<span class="keyword">return</span> ReadAtLeast(r, buf, <span class="built_in">len</span>(buf))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>意思是读取正好len(buf)长度的字节。如果字节数不是指定长度，则返回错误信息和正确的字节数。当没有字节能被读时，返回EOF错误。如果读了一些，但是没读完产生EOF错误时，返回ErrUnexpectedEOF错误。</p>
<h2 id="Reader-interface"><a href="#Reader-interface" class="headerlink" title="Reader interface"></a>Reader interface</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Reader 是封装了基本 Read 方法的接口。</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Read 最多将 len(p) 个字节读入 p。</span></span><br><span class="line"><span class="comment">// 它返回读取的字节数 (0 &lt;= n &lt;= len(p)) 和遇到的任何错误。</span></span><br><span class="line"><span class="comment">// 即使 Read 返回 n &lt; len(p)，它也可能在调用期间使用所有 p 作为暂存空间。</span></span><br><span class="line"><span class="comment">// 如果某些数据可用但不是 len(p) 字节，Read 通常会返回可用的数据，而不是等待更多。</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// 当Read成功读取n&gt;0个字节后遇到错误或文件结束条件时，返回读取的字节数。</span></span><br><span class="line"><span class="comment">// 它可能会从同一次调用中返回非零（non-nil）错误，或者从后续调用中返回错误（并且 n == 0）。</span></span><br><span class="line"><span class="comment">// 这种一般情况的一个例子是，在输入流末尾返回非零字节数的 Reader 可能会返回 err == EOF 或 err == nil。</span></span><br><span class="line"><span class="comment">// 下一次读 Read 应该返回 0，EOF。</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// 在考虑错误 err 之前，调用者应始终处理返回的 n &gt; 0 字节。</span></span><br><span class="line"><span class="comment">// 这样做可以正确处理读取一些字节后发生的 I/O 错误以及允许的 EOF 行为。</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// 不鼓励 Read 的实现返回零字节计数并返回 nil 错误，除非 len(p) == 0。</span></span><br><span class="line"><span class="comment">// 调用者应该将返回的 0 和 nil 视为没有发生任何事情；特别是它不表示EOF。</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// 实现不能保留 p。</span></span><br><span class="line"><span class="keyword">type</span> Reader <span class="keyword">interface</span> &#123;</span><br><span class="line">	Read(p []<span class="type">byte</span>) (n <span class="type">int</span>, err <span class="type">error</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="article-licensing box"><div class="licensing-title"><p>rand 随机数生成方法研究草稿</p><p><a href="https://jiejaitt.github.io/posts/57e7820e.html">https://jiejaitt.github.io/posts/57e7820e.html</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>JIeJaitt</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2022-12-06</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2022-12-06</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="notification is-danger">You need to set <code>install_url</code> to use ShareThis. Please set it in <code>_config.yml</code>.</div></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button donate" href="/" target="_blank" rel="noopener" data-type="afdian"><span class="icon is-small"><i class="fas fa-charging-station"></i></span><span>爱发电</span></a><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="https://pic.imgdb.cn/item/611266d05132923bf8a1d198.jpg" alt="支付宝"></span></a><a class="button donate" href="/" target="_blank" rel="noopener" data-type="buymeacoffee"><span class="icon is-small"><i class="fas fa-coffee"></i></span><span>送我杯咖啡</span></a><a class="button donate" href="/" target="_blank" rel="noopener" data-type="patreon"><span class="icon is-small"><i class="fab fa-patreon"></i></span><span>Patreon</span></a><div class="notification is-danger">You forgot to set the <code>business</code> or <code>currency_code</code> for Paypal. Please set it in <code>_config.yml</code>.</div><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="https://pic.imgdb.cn/item/6112669d5132923bf8a16e7d.jpg" alt="微信"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/posts/43af5e27.html"><i class="level-item fas fa-chevron-left"></i><span class="level-item">Go语言高级编程(Advanced Go Programming)</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/posts/34d309a9.html"><span class="level-item">Go语言经典库使用分析| 高性能可扩展 HTTP 路由 httprouter</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div id="comment-container"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js"></script><script>var gitalk = new Gitalk({
            id: "b2c45c3dedc02bfc2fa07614f51f0d4a",
            repo: "gitalk",
            owner: "JIeJaitt",
            clientID: "62d7216ae38e14428f95",
            clientSecret: "4ba230f5f04cfa4bcc4b76a1a10e4da56df38fee",
            admin: ["JIeJaitt"],
            createIssueManually: false,
            distractionFreeMode: false,
            perPage: 10,
            pagerDirection: "last",
            
            
            enableHotKey: true,
            language: "zh-CN",
        })
        gitalk.render('comment-container')</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/img/avatar.png" alt="JIeJaitt"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">JIeJaitt</p><p class="is-size-6 is-block">有趣的技术实践分享</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Your location</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">21</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">4</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">0</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/jiejaitt" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/jiejaitt"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com/jiejaitt"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com/jiejaitt"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com/jiejaitt"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://jiejaitt.github.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Icarus</span></span><span class="level-right"><span class="level-item tag">jiejaitt.github.io</span></span></a></li><li><a class="level is-mobile" href="https://jiejaitt.notion.site" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Notion</span></span><span class="level-right"><span class="level-item tag">jiejaitt.notion.site</span></span></a></li></ul></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/%E6%9C%9F%E6%9C%AB%E8%80%83%E8%AF%95/"><span class="level-start"><span class="level-item">期末考试</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%A7%91%E7%8F%AD%E5%9F%BA%E7%A1%80/"><span class="level-start"><span class="level-item">科班基础</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%AE%97%E6%B3%95%E7%AB%9E%E8%B5%9B/"><span class="level-start"><span class="level-item">算法竞赛</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/"><span class="level-start"><span class="level-item">项目实战</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li></ul></div></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2023/05/"><span class="level-start"><span class="level-item">五月 2023</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/04/"><span class="level-start"><span class="level-item">四月 2023</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/02/"><span class="level-start"><span class="level-item">二月 2023</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/01/"><span class="level-start"><span class="level-item">一月 2023</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/12/"><span class="level-start"><span class="level-item">十二月 2022</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/07/"><span class="level-start"><span class="level-item">七月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2013/07/"><span class="level-start"><span class="level-item">七月 2013</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><!--!--><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">订阅更新</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div><div class="card widget"><div class="card-content"><div class="notification is-danger">You need to set <code>client_id</code> and <code>slot_id</code> to show this AD unit. Please set it in <code>_config.yml</code>.</div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="level is-mobile" href="#Variables"><span class="level-left"><span class="level-item">1</span><span class="level-item">Variables</span></span></a></li><li><a class="level is-mobile" href="#func-Int"><span class="level-left"><span class="level-item">2</span><span class="level-item">func Int</span></span></a></li><li><a class="level is-mobile" href="#func-Prime"><span class="level-left"><span class="level-item">3</span><span class="level-item">func Prime</span></span></a></li><li><a class="level is-mobile" href="#func-Read"><span class="level-left"><span class="level-item">4</span><span class="level-item">func Read</span></span></a></li><li><a class="level is-mobile" href="#Read-Function"><span class="level-left"><span class="level-item">5</span><span class="level-item">Read Function</span></span></a></li><li><a class="level is-mobile" href="#ReadFull-Function"><span class="level-left"><span class="level-item">6</span><span class="level-item">ReadFull Function</span></span></a></li><li><a class="level is-mobile" href="#Reader-interface"><span class="level-left"><span class="level-item">7</span><span class="level-item">Reader interface</span></span></a></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-05-13T17:58:18.442Z">2023-05-14</time></p><p class="title"><a href="/posts/2f2e68b6.html">经典库httprouter源码阅读</a></p><p class="categories"><a href="/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/">项目实战</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-05-03T15:38:35.998Z">2023-05-03</time></p><p class="title"><a href="/posts/d6db6725.html">Cobra</a></p><p class="categories"><a href="/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/">项目实战</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-05-03T06:14:01.071Z">2023-05-03</time></p><p class="title"><a href="/posts/328f6061.html">gmp</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-05-02T13:36:12.800Z">2023-05-02</time></p><p class="title"><a href="/posts/572661ae.html">sql｜Structured Query Language</a></p><p class="categories"><a href="/categories/%E7%A7%91%E7%8F%AD%E5%9F%BA%E7%A1%80/">科班基础</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-04-24T15:48:25.917Z">2023-04-24</time></p><p class="title"><a href="/posts/cc4d5834.html">置顶</a></p></div></article></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="有趣的技术实践分享" height="28"></a><p class="is-size-7"><span>&copy; 2023 JIeJaitt</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/JIeJaitt"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><script type="text/x-mathjax-config">MathJax.Hub.Config({
            'HTML-CSS': {
                matchFontHeight: false
            },
            SVG: {
                matchFontHeight: false
            },
            CommonHTML: {
                matchFontHeight: false
            },
            tex2jax: {
                inlineMath: [
                    ['$','$'],
                    ['\\(','\\)']
                ]
            }
        });</script><script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.9/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>